

<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-6DBZB44BXE"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-6DBZB44BXE');
    </script>
    <!-- General -->
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Keep R Awake During Long Jobs with NoSleepR</title>
    <meta name="description" content="A lightweight R package that prevents your computer from sleeping while long-running computations are active - without changing global system settings." />
    <meta name="author" content="Evgeny Metelkin" />
    <!-- article -->
    <meta property="article:author" content="https://metelkin.me" />
    <meta property="article:published_time" content="2025-11-28T00:00:00Z" />
    <meta property="article:modified_time" content="2025-11-28T00:00:00Z" />
    <!-- SEO -->
    <link rel="canonical" href="https://metelkin.me/keep-r-awake/" />
    <!-- Open Graph -->
    <meta property="og:title" content="Keep R Awake During Long Jobs with NoSleepR" />
    <meta property="og:description" content="A lightweight R package that prevents your computer from sleeping while long-running computations are active - without changing global system settings." />
    <meta property="og:url" content="https://metelkin.me/keep-r-awake/" />
    <meta property="og:image" content="https://metelkin.me/keep-r-awake/img/fig0-cover.jpg" />
    <meta property="og:site_name" content="Evgeny Metelkin" />
    <meta property="og:type" content="article" />
    <!-- Style -->
    <link rel="icon" href="/assets/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/water.css@2/out/water.min.css">
    <!--<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@5.8.1/github-markdown-light.min.css">-->
    <style>
        //.markdown-body { max-width: 70ch; margin-inline: auto; padding: 2rem; }
        .container { display: flex; gap: 10px; }
        .half { box-sizing: border-box; }
        .half:first-child { width: 60%;}
        .half:last-child { width: 40%; }

        .minlist{list-style:none;margin:0;padding:0}
        .minlist li{padding:.5rem 0;border-bottom:1px solid #f2f2f2}
        .minrow{display:flex;gap:.75rem;align-items:baseline}
        .minlink{font-weight:600;text-decoration:none}
        .minlink:hover{text-decoration:underline}
        .mindate{margin-left:auto;color:#888;font-size:.9em;white-space:nowrap}
        .minsub{color:#666;margin-top:.15rem}

        @media (max-width: 768px) {
            .container { flex-direction: column; }
            .half { width: 100% !important; }
            .half:last-child img { width: 100%; height: auto; display: block; }
        }
    </style>
    <!-- To highlight code -->
	<link href="https://unpkg.com/prismjs@1.20.0/themes/prism-okaidia.css" rel="stylesheet"/>
    <!-- MathJax -->
    <script>
        window.MathJax = {
            tex: { 
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$','$$'], ['\\[','\\]']]
            },
            svg: { fontCache: 'global' }
        };
    </script>
    <script id="MathJax-script" async
        src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
    </script>
</head>

<body>
    
    <h1>Keep R Awake During Long Jobs with NoSleepR</h1>
    <h2></h2>
    <div>
        <p><strong>Evgeny Metelkin</strong></p>
        <p><strong>2025-11-28</strong></p>
    </div>
    <dev class="markdown-body">
        <p><img src="./img/fig0-cover.jpg" alt="Cover"></p>
<p>When R runs something heavy for an hour or two, laptops don't always care - many will still go to sleep if there's no user activity.<br>
On Windows with Modern Standby, on macOS with default power settings, or on Linux with aggressive power-saving policies, this can interrupt work even if R is still busy.</p>
<p><strong>NoSleepR</strong> solves this problem with a simple idea:<br>
<strong>keep the system awake only while R is doing something important, and let it return to normal afterward.</strong></p>
<p>It uses the operating system's official sleep-prevention mechanisms:</p>
<ul>
<li><strong>Windows:</strong> PowerRequest API</li>
<li><strong>macOS:</strong> <code>caffeinate</code></li>
<li><strong>Linux (systemd):</strong> <code>systemd-inhibit</code></li>
</ul>
<p>No hacks, no fake mouse movement, and no permanent power-plan changes.</p>
<h2>Basic usage</h2>
<p>Install from CRAN:</p>
<pre class="language-r"><code class="language-r">install.packages<span class="token punctuation">(</span><span class="token string">"NoSleepR"</span><span class="token punctuation">)</span>
library<span class="token punctuation">(</span>NoSleepR<span class="token punctuation">)</span></code></pre>
<p>Turn sleep prevention on manually:</p>
<pre class="language-r"><code class="language-r">nosleep_on<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># long-running R work here</span>
nosleep_off<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre>
<p>Or wrap a block:</p>
<pre class="language-r"><code class="language-r">with_nosleep<span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment"># heavy computation here</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
<p>If needed, keep the screen awake too:</p>
<pre class="language-r"><code class="language-r">with_nosleep<span class="token punctuation">(</span>keep_display <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token comment"># long-running code</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
<p>This is particularly useful on Windows laptops that ignore sleep-prevention when the display turns off in battery mode.</p>
<h2>Why this package exists</h2>
<p>Disabling sleep mode globally works, but it's overkill:</p>
<ul>
<li>consumes battery even when idle,</li>
<li>requires changing system settings (sometimes blocked by admins),</li>
<li>easy to forget to revert.</li>
</ul>
<p><code>NoSleepR</code> keeps things simple: <strong>only stay awake when the code runs.</strong></p>
<p>If your workflow calls <strong>C++</strong>, <strong>Rcpp</strong>, <strong>external binaries</strong>, or other <strong>blocking system calls</strong>, they are covered as long as R waits for them to finish.</p>
<h2>What NoSleepR does ŒùŒüŒ§ do</h2>
<p>Some behaviors are controlled strictly by the OS and cannot be overridden:</p>
<ul>
<li>closing the laptop lid forces sleep,</li>
<li>pressing the power button forces sleep,</li>
<li>corporate-managed policies may override PowerRequest.</li>
</ul>
<p>On remote servers, the package does nothing: servers normally do not sleep, and remote session drops are usually network timeouts.</p>
<h2>Practical scenarios</h2>
<ul>
<li>overnight simulations</li>
<li>bootstrap or MCMC workflows</li>
<li>machine-learning training loops</li>
<li>ETL or data-cleaning pipelines</li>
<li>unattended scripts on laptops with aggressive sleep policies</li>
</ul>
<p>If the &quot;YouTube tab&quot; method works for you, <code>NoSleepR</code> will work too but without wasting power or being ridiculous.</p>
<h2>Feedback</h2>
<p>Bug reports, suggestions, and contributions are welcome:</p>
<p>üëâ <a href="https://github.com/hetalang/NoSleepR" target="_blank" rel="noopener noreferrer">https://github.com/hetalang/NoSleepR</a></p>
<hr>
<p>This post is syndicated at <a href="https://www.r-bloggers.com/" target="_blank" rel="noopener noreferrer">R-bloggers</a>.</p>

    </dev>
    <dev>
        <p><strong>License: <a href="https://creativecommons.org/licenses/by/4.0/" target="_blanc">CC-BY-4.0</a></strong></p> 
    </dev>

</body>
